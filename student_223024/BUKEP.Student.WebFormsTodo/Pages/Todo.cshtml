@page
@model BUKEP.Student.WebFormsTodo.Pages.TodoModel
@{
	ViewData["Title"] = "Todo";
}

<style>
	div.main-page {
		display: grid;
		grid-template-columns: 1fr 4fr 1fr;
		gap: 5px;
	}

	.add-task {
		display: grid;
		grid-row-gap: 5px;
	}

	.center-text {
		text-align: center;
	}

	.new-task-button {
		background: rgb(0,144,255);
	}

	.widest-cell {
		grid-column: 1 / -1;
		
	}

	td, tr, table {
		border: 1px solid rgb(0,0,0);
	}
</style>

<div class="main-page">
	<b class="center-text">Список задач</b>
	<b></b>
	<form asp-page-handler="ShowModificationMenu" method="post">
		<button class="new-task-button">Добавить задачу</button>
	</form>
	<table class="widest-cell">
		<thead>
			<tr>
				<td>Задача</td>
				<td>Описание</td>
				<td>Кнопка</td>
			</tr>
		</thead>
		<tbody>
			@{
				foreach(var task in Model.taskManager.GetTasks())
				{
					<tr>
						<td>@task.Name</td>
						<td>@task.Description</td>
						<td style="display: flex; flex-direction: row;">
							<form asp-page-handler="DeleteRedirect" asp-route-tname="@task.Name" asp-route-tdescr="@task.Description" method="post">
								<button>удалить херню</button>
							</form>
							<form asp-page-handler="DeleteRedirect" asp-route-tname="@task.Name" asp-route-tdescr="@task.Description" method="post">
								<button>редактировать херню</button>
							</form>
						</td>
					</tr>
				}
			}
		</tbody>
	</table>
</div>
@{
	if (Model.showModificationMenu == true)
	{
		Model.writeToDebug("kys");
		<div>
			<form asp-page-handler="SaveTask" class="add-task">
				<h2>Задача</h2>
				<input name="taskname" type="text" placeholder="Введите заголовок задачи..." style="width: 100%" />
				<div>Описание задачи:</div>
				<input name="taskdescr" type="text" placeholder="Введите описание задачи..." style="width: 100%; height: 100px;" />
				<div style="display: flex; flex-flow:row-reverse;">
					<button name="action" value="save">Сохранить</button>
					<button name="action" value="cancel">Отмена</button>
				</div>
			</form>
		</div>
	}
}


